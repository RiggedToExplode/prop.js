$P.mouse={left:!1,middle:!1,right:!1,pos:new $P.Coord(0,0),get x(){return this.pos.x},get y(){return this.pos.y},relPos:function(e){let s=e.canvas.el.getBoundingClientRect();return new $P.Coord(e.scale.x*(this.pos.x-s.left-e.canvasPos.x)+e.stagePos.x,e.scale.y*(this.pos.y-s.top-e.canvasPos.y)+e.stagePos.y)},relX:function(e){let s=e.canvas.el.getBoundingClientRect();return e.scale.x*(this.pos.x-s.left-e.canvasPos.x)+e.stagePos.x},relY:function(e){let s=e.canvas.el.getBoundingClientRect();return e.scale.y*(this.pos.y-s.top-e.canvasPos.y)+e.stagePos.y}},$P.mouse.x=$P.mouse.pos.x,window.addEventListener("mousedown",function(e){switch(e.button){case 0:$P.mouse.left=!0;break;case 1:$P.mouse.middle=!0;break;case 2:$P.mouse.right=!0}},!1),window.addEventListener("mouseup",function(e){switch(e.button){case 0:$P.mouse.left=!1;break;case 1:$P.mouse.middle=!1;break;case 2:$P.mouse.right=!1}},!1),window.addEventListener("mousemove",function(e){$P.mouse.pos.x=e.clientX,$P.mouse.pos.y=e.clientY},!1);